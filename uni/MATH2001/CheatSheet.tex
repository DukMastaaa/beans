% \documentclass[a4paper,landscape,columns=2]{cheatsheet}
\documentclass[10pt, a4paper]{article}

\usepackage{geometry}

\usepackage[short,nodayofweek,level]{datetime}

\input{mymathpreamble.tex}

\usepackage{pdflscape}

\usepackage[activate={true,nocompatibility},final,tracking=true,kerning=true,spacing=true,factor=1100,stretch=10,shrink=10]{microtype}

\usepackage{multicol}
\setlength{\columnsep}{0.8cm}

\usepackage{titlesec}
\titleformat*{\section}{\large\bfseries}
\titlespacing*{\section}{0pt}{2ex}{2ex}  % 4.3ex plus .2ex

\usepackage{tabularx}
\usepackage{tcolorbox}
\usepackage{enumitem}

\usepackage{tikz}
\usepackage{tikzducks}

\setcounter{secnumdepth}{0}  % get rid of section numbering - no need to use \section*

% https://tex.stackexchange.com/a/390653
\newlength{\interwordspace}
\settowidth{\interwordspace}{\enspace}

\pagenumbering{gobble}

\begin{document}

% \setlength{\abovedisplayskip}{0pt}
% \setlength{\belowdisplayskip}{0pt}
% \setlength{\abovedisplayshortskip}{0pt}
% \setlength{\belowdisplayshortskip}{0pt}

\newgeometry{margin=8mm}

\begin{landscape}
\begin{multicols}{3}

    \section{Differential Equations}

    \[y' + a(x) y = b(x) \longrightarrow h(x) = e^{\int a(x) \deriv x}\]
    %
    \begin{align*}
        \text{2 distinct \(\lambda\):} \enspace y_{H} &= c_1 e^{\lambda_{1} x} + c_2 e^{\lambda_{2} x} \\
        \text{1 repeated \(\lambda\):} \enspace y_{H} &= c_1 x e^{\lambda x} + c_2 e ^{\lambda x} \\
        \lambda = \alpha \pm \omega i\text{:} \enspace y_{H} &= e^{\alpha x} \left(c_1 \cos \omega x + c_2 \sin \omega x\right).
    \end{align*}
    %
    \begin{align*}
        k e^{\alpha x} &\longrightarrow ce^{\alpha x} \\
        k x^{n} &\longrightarrow \sum_{i=0}^{n} c_{i} x^{i} \\
        k \cos \alpha x \text{ or } k \sin \alpha x &\longrightarrow c_1 \cos \alpha x + c_2 \sin \alpha x \\
        \left(\cdots\right) e^{\alpha x} &\longrightarrow \left(\cdots\right) e^{\alpha x}
    \end{align*}
    %
    \[W(y_1, y_2)(x) = \det \begin{pmatrix}
        y_1 & y_2 \\ 
        y_1' & y_2' \\ 
    \end{pmatrix} = y_1 y_2' - y_2 y_1'\]
    %
    \begin{align*}
        r &= y'' + py' + qy & y_{P} &= uy_1 + vy_2 \\
        u &= - \int \frac{y_2 r}{W} \deriv x & v &= \int \frac{y_1 r}{W} \deriv x
    \end{align*}
    %
    \begin{align*}
        \cosh x &= \frac{e^x + e^{-x}}{2} & \sinh x &= \frac{e^x - e^{-x}}{2} \\
        \cosh ix &= \cos x & \sinh ix &= i \sin x
    \end{align*}

    \section{Projections and Orthonormal Bases}

    \[\mat{P}_{\beta' \to \beta''} \mat{P}_{\beta \to \beta'} = \mat{P}_{\beta \to \beta''}\]
    %
    \begin{align*}
        \norm{\vec{v}} &= \sqrt{\inner{\vec{v}}{\vec{v}}} \\
        d(\vec{u}, \vec{v}) &= \norm{\vec{u} - \vec{v}} \\
        \abs{\inner{\vec{u}}{\vec{v}}} &\leq \norm{\vec{u}} \norm{\vec{v}} \\
        \norm{\vec{u} + \vec{v}} &\leq \norm{\vec{u}} + \norm{\vec{v}}
    \end{align*}
    %
    \[
        \norm{\vec{u} + \vec{v}}^{2} = \norm{\vec{u}}^{2} + \norm{\vec{v}}^{2} \iff \inner{\vec{u}}{\vec{v}} = 0
    \]
    %
    \begin{align*}
        U^{\perp} &= \left\{ \vec{v} \in V \,\mid\, \inner{\vec{v}}{\vec{u}} = 0 \;\forall \vec{u} \in U \right\} \\
        \proj_{U} (\vec{v}) &= \inner{\vec{v_1}}{\uvec{e}[1]} \uvec{e}[1] + \cdots + \inner{\vec{v}}{\uvec{e}[k]} \uvec{e}[k] \\
    \proj_{U^{\perp}} (\vec{v}) &= \vec{v} - \proj_{U} (\vec{v})
    \end{align*}
    %
    \[\mat{A}\vec{x} = \vec{b} \longrightarrow \mat{A}^{\tpose} \mat{A} \vec{x} = \mat{A}^{\tpose} \vec{b}
    \longrightarrow \vec{x} = (\mat{A}^{\tpose} \mat{A})^{-1} \mat{A}^{\tpose} \vec{b}\]

    \section{Matrix-Related Computation}

    \[
        \mat{A}\vec{x} = \lambda \vec{x} \quad \det (\mat{A} - \lambda \mat{I})
        = 0 \quad (\mat{A} - \lambda \mat{I}) \vec{x} = \vec{0}
    \]
    %
    \(\mat{A}\mat{P} = \mat{P}\mat{D}\), where \(\mat{A} = \mat{P}\mat{D}\mat{P}^{-1}\) for diagonalisation and
    \(\mat{A} = \mat{P}\mat{D}\mat{P}^{\tpose}\) for orthogonal diagonalisation.
    \[
        \mat{P} = \begin{bmatrix}
            \vec{v_1} & \vec{v_2} & \cdots \\ 
        \end{bmatrix}
        \quad
        \mat{D} = \begin{pmatrix}
            \lambda_1 & 0 & 0 \\ 
            0 & \ddots & 0 \\ 
            0 & 0 & \lambda_{n} \\ 
        \end{pmatrix}
    \]
    \(\mat{P}\)'s vectors need to be \emph{orthonormal} when orthogonally diagonalising.
    %
    \begin{align*}
        ax^{2} + by^{2} + cxy &\longrightarrow \begin{pmatrix}
            a & c/2 \\ 
            c/2 & b \\ 
        \end{pmatrix} \\
        \begin{aligned}
            ax^{2} + by^{2} + cz^{2} + dxy& \\
            + exz + fyz &
        \end{aligned}
         &\longrightarrow \begin{pmatrix}
            a & d/2 & e/2 \\ 
            d/2 & b & f/2 \\ 
            e/2 & f/2 & c \\ 
        \end{pmatrix}
    \end{align*}
    %
    \[\vec{x}^{\tpose} \mat{A} \vec{x} + \mat{K} \vec{x} + c = 0\]
    %
    When orthogonally diagonalising coefficient matrix of quadratic form, arrange column vectors of
    \(\mat{P}\) such that \(\det \mat{P} = +1\).

    \section{Taylor Series and Critical Points}

    \[\mat{H}_f = \begin{pmatrix}
        f_{x_{1} x_{1}} & \cdots & f_{x_{1} x_{n}} \\ 
        \vdots & \ddots & \vdots \\ 
        f_{x_{n} x_{1}} & \cdots & f_{x_{n} x_{n}} \\ 
    \end{pmatrix}\]
    %
    \begin{align*}
        f(\vec{x}) &\approx f(\vec{x_0}) + \left(\grad f (\vec{x_0})\right)^{\tpose} (\vec{x} - \vec{x_0}) \\
        &\quad + \frac{1}{2} (\vec{x} - \vec{x_0})^{\tpose} \mat{H}_f(\vec{x_0}) (\vec{x} - \vec{x_0}) + \cdots
    \end{align*}
    %
    \[
        f(\vec{x} + \vec{h}) \approx \sum_{l=0}^{\infty} \frac{1}{l!} \left(\vec{h} \cdot \grad\right)^{l} f(\vec{x})
    \]
    %
    \begin{itemize}
        \item Minimum: all \(\lambda > 0\)
        \item Maximum: all \(\lambda < 0\)
        \item Saddle: there are \(\lambda\) with different signs
        \item Inconclusive: there are some \(\lambda\) which equal 0 and the rest (non-zero \(\lambda\)) have the same sign
    \end{itemize}

    \section{Double and Triple Integrals}

    For \(a, b, c, d \in \mathbb{R}\),
    \[
        \int_{a}^{b} \int_{c}^{d} f(x) g(y) \deriv y \deriv x
        = \left(\int_{a}^{b} f(x) \deriv x\right) \left(\int_{c}^{d} g(y) \deriv y\right)
    \]
    %
    \begin{align*}
        \mathrm{area} &= \iint_{D} 1 \deriv A  &
        \mathrm{average} &= \frac{\iint_{D} f(x, y) \deriv A}{\iint_{D} 1 \deriv A} \\
        \mathrm{volume} &= \iiint_{V} 1 \deriv V  &
        \mathrm{average} &= \frac{\iiint_{V} f(x, y, z) \deriv V}{\iiint_{V} 1 \deriv v}
    \end{align*}
    %
    \begin{align*}
        m &= \iiint_V \rho(x, y, z) \deriv V  &  M_{yz} &= \iiint_V x \rho(x, y, z) \deriv V \\
        M_{xz} &= \iiint_V y \rho(x, y, z) \deriv V  &  M_{xy} &= \iiint_V z \rho(x, y, z) \deriv V
    \end{align*}
    %
    \[\bar x = \frac{M_{yz}}{m} \quad \bar y = \frac{M_{xz}}{m} \quad \bar z = \frac{M_{xy}}{m}\]
    %
    For 2D, use \(\iint_{A} (\cdots) \deriv A\) with \(\rho(x, y)\) and \(z = 0\). Then use
    \(M_{yz} = M_y\), \(M_{xz} = M_x\), \(M_{xy} = 0\).

    \section{Coordinate Systems}
    % {%
    %     \def\arraystretch{1.3}
        \begin{tabularx}{\linewidth}{lX}
        \hline
        Polar       & {%
                    \(
                    \begin{aligned}[t]
                        x &= r \cos \theta  &  y &= r \sin \theta \\
                        \abs{J} &= r  &  r^2 &= x^2 + y^2
                    \end{aligned}
                    \)
                    } \\ \hline
        Cylindrical & Polar but with \(z\) parameter \newline \(\abs{J} = r\) \\ \hline
        Spherical   & {
                    \(
                    \begin{aligned}[t]
                        x &= r \cos \theta \sin \varphi  &  y &= r \sin \theta \sin \varphi \\
                        z &= r \cos \varphi  &  r^2 &= x^2 + y^2 + z^2 \\
                        \abs{J} &= r^2 \sin \varphi  &  &
                    \end{aligned}
                    \)
                    } \\ \hline
        \end{tabularx}
    % }
    %
    \[
        \mathrm{Jacobian} = \abs{J} = \abs{
            \det \begin{pmatrix}
                \pfrac{x}{u} & \pfrac{x}{v} & \pfrac{x}{w} \\ 
                \pfrac{y}{u} & \pfrac{y}{v} & \pfrac{y}{w} \\ 
                \pfrac{z}{u} & \pfrac{z}{v} & \pfrac{z}{w} \\ 
            \end{pmatrix}
        }
    \]

    \begin{tcolorbox}[colframe=red!75!black, arc=0pt, outer arc=0pt]
        ducky's MATH2001 cheat sheet --- \today
    \end{tcolorbox}

\end{multicols}
\end{landscape}
\pagebreak

\newgeometry{left=8mm,right=8mm,top=20mm,bottom=17mm}
% \vspace*{\fill}

\section{Vector Calculus}
\vspace{-0.5cm}
\begin{multicols}{2}

    \begin{align*}
        \grad &= \left(\pfrac{}{x}, \pfrac{}{y}, \pfrac{}{z}\right) \\
        D_{\uvec{u}}(f) &= \left(\grad f\right) \cdot \uvec{u}
    \end{align*}
    %
    \begin{align*}
        W &= \int_{C} \vec{F} \cdot \deriv \vec{r} 
            = \int_{a}^{b} \vec{F}(\vec{r}(t)) \cdot \vec{r}'(t) \deriv t \\
        \int_{C} \grad f \cdot \deriv \vec{r} &= f(\vec{r}(b)) - f(\vec{r}(a))
    \end{align*}
    %
    \begin{align*}
        \div \vec{v} &= \grad \cdot \vec{v} = \pfrac{v_1}{x} + \pfrac{v_2}{y} + \pfrac{v_3}{z} \\
        \curl \vec{v} &= \grad \times \vec{v} = 
            \begin{vmatrix}
                \uvec{i} & \uvec{j} & \uvec{k} \\
                \pfrac{}{x} & \pfrac{}{y} & \pfrac{}{z} \\
                v_1 & v_2 & v_3
            \end{vmatrix}
    \end{align*}
    %
    \[
        \left(\vec{r_{u}}(a, b) \times \vec{r_{v}}(a, b)\right) \cdot
        \left((x, y, z) - \vec{r}(a, b) \right) = 0
    \]
    %
    \[
        \iint_{S} f(x, y, z) \deriv S =
        \iint_{D} f(\vec{r}(u, v)) \norm{\vec{r_{u}} \times \vec{r_{v}}} \deriv A
    \]
    %
    \vfill\columnbreak
    %
    \begin{align*}
        \mathrm{flux} &= \int_{C} \vec{v} \cdot \vec{n} \deriv S 
            = \int_{a}^{b} \vec{v}(\vec{r}(t)) \cdot
            \underbrace{
                \left( \vec{r} '(t) \times \uvec{k} \right)
            }_{\text{check orientation}}
            \deriv t \\
        \mathrm{flux} &= \iint_{S} \vec{v} \cdot \vec{n} \deriv S =
            \iint_{D} \vec{v} \cdot \left(\vec{r_{u}} \times \vec{r_{v}}\right) \deriv A \\
    \end{align*}
    %
    \begin{align*}
        \iint_{D} \pfrac{F_2}{x} - \pfrac{F_1}{y} \deriv A 
            &= \oint_{\partial D} \vec{F} \cdot \deriv \vec{r} \\
        \oint_{\partial D} \vec{v}(x, y) \cdot \vec{n} \deriv S
            &= \iint_{D} \grad \cdot \vec{v}(x, y) \deriv A \\
        \oiint_{S} \vec{F} \cdot \vec{n} \deriv S 
            &= \iiint_{V} \grad \cdot \vec{F} \deriv V \\
        \iint_{S} \left(\grad \times \vec{F}\right) \cdot \vec{n} \deriv S
            &= \oint_{\partial S} \vec{F} \cdot \deriv \vec{r}
    \end{align*}
    %
    \[
        \vec{F} \text{ conservative } \iff \grad \times \vec{F} = \vec{0} \; \left(\text{or \(\pfrac{F_1}{y} = \pfrac{F_2}{x}\)}\right) 
    \]
\end{multicols}

\section{Miscellaneous}
\begin{multicols}{2}
    
    \begin{align*}
        \int \frac{1}{\sqrt{x^2 + 1}} \deriv x &= \arsinh(x) + c \\
        \int \frac{1}{\sqrt{x^2 - 1}} \deriv x &= \arcosh(x) + c, x > 1 \\
        \arsinh(x) &= \ln \left(x + \sqrt{x^2 + 1}\right) \\
        \arcosh(x) &= \ln \left(x + \sqrt{x^2 - 1}\right), x \geq 1 \\
        \artanh(x) &= \frac{1}{2} \ln \left(\frac{1 + x}{1 - x}\right), x \in (-1, 1) \\
    \end{align*}

    For some \(\mat{A} \in M_{n \times n}(\mathbb{F})\), the following statements are equivalent:
    \begin{itemize}
        \item \(\mat{A}\) is non-singular (\(\mat{A}^{-1}\) exists)
        \item Only \(\vec{x} = \vec{0}\) satisfies \(\mat{A} \vec{x} = \vec{0}\)
        \item The row-echelon form of \(\mat{A}\) does not have a row of zeroes
        \item \(\mat{A} \vec{x} = \vec{b}\) has a solution for all \(\vec{b} \in \mathbb{R}^n\)
        \item \(\det \mat{A} \neq 0\)
        \item Columns of \(\mat{A}\) are linearly independent
        \item Rows of \(\mat{A}\) are linearly independent
        \item \(\dim(\nullspace(\mat{A})) = 0\)
        \item \(\rank \mat{A} = n\)
        \item \(\lambda = 0\) is not an eigenvalue of \(\mat{A}\)
    \end{itemize}
    %
    \vfill\columnbreak
    %
    The Gram-Schmidt process constructs an orthonormal basis \(\{\uvec{e}[1], \cdots, \uvec{e}[n]\}\) out of \(n\) linearly
    independent \(\{\vec{v_1}, \cdots, \vec{v_n}\}\). First let \(\uvec{e}[1] = \frac{\vec{v_1}}{\norm{\vec{v_1}}}\).
    Then, for each \(i = 1, \cdots{}, n\):
    \begin{enumerate}
        \item Let \(U_i = \spn \{\uvec{e}[1], \cdots, \uvec{e}[i]\}\).
        \item Calculate \(\vec{w_{i+1}} = \vec{v_{i+1}} - \proj_{U_{i}} \left(\vec{v_{i+1}}\right)\).
        \item Set \(\uvec{e}[i+1] = \frac{\vec{w_{i+1}}}{\norm{\vec{w_{i+1}}}}\) and increment \(i\) if required.
    \end{enumerate}
    %
    \(\mat{A} \in M_{n \times n}(\mathbb{F})\) is diagonalisable (\(\mat{A} = \mat{P}\mat{D}\mat{P}^{-1}\))
    \begin{itemize}[leftmargin=0.87cm, labelsep=\interwordspace]
        \item[iff] \(\mat{A}\) has \(n\) linearly independent eigenvectors
        \item[iff] algebraic and geometric multiplicities are equal for every eigenvalue
    \end{itemize}

    \(\mat{A} \in M_{n \times n}(\mathbb{R})\) is orthogonally diagonalisable (\(\mat{A} = \mat{P}\mat{D}\mat{P}^{\tpose}\))
    \begin{itemize}[leftmargin=0.87cm, labelsep=\interwordspace]
        \item[iff] \(\mat{A}\) is symmetric, i.e. \(\mat{A} = \mat{A}^{\tpose}\)
        \item[iff] eigenvectors corresponding to different eigenvalues are orthogonal with respect to the dot product 
    \end{itemize}

    The complex inner product for \(\vec{u}, \vec{v} \in \mathbb{C}^n\) is defined by
    \[\inner{\vec{u}}{\vec{v}} = u_1 \overline{v_1} + \cdots + u_n \overline{v_n} = \vec{v}^{*} \vec{u} \in \mathbb{C}\]
    where \(\bar z\) is the conjugate of \(z\) and \(\vec{v}^{*}\) is the conjugate transpose of \(\vec{v}\). It satisfies
    \(\overline{\inner{\vec{u}}{\vec{v}}} = \inner{\vec{v}}{\vec{u}}\).

    \begin{itemize}
        \item Ellipse or circle: \(\frac{x^2}{k^2} + \frac{y^2}{l^2} = 1\) for \(k, l > 0\)
        \item Hyperbola: \(\frac{x^2}{k^2} - \frac{y^2}{c^2}\) or \(\frac{y^2}{c^2} - \frac{x^2}{k^2}\) for \(k, l > 0\)
        \item Parabola: \(x^2 = ky\) or \(y^2 = kx\) for \(k \neq 0\)
    \end{itemize}
\end{multicols}

\begin{figure}[b]
    \centering
    \begin{tikzpicture}[scale=0.3]
        \duck[graduate=gray!20!black,
            tassel=red!70!black]
    \end{tikzpicture} 
\end{figure}

% \vspace*{\fill}
\end{document}
